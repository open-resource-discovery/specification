/*
 - Light theme mobile navbar and sidebar overrides
 - Dark theme mobile navbar and sidebar overrides
 - Sidebar open state (overlay and scroll lock)
*/

/* Light theme mobile navbar and sidebar overrides */
@media (max-width: 996px) {
  html[data-theme="light"]
    nav.navbar:not(.navbar-sidebar--show)
    nav.navbar
    :is(.navbar__toggle, [class*="toggleButton_"]) {
    color: var(--lp-c-text-2) !important;
  }
  html[data-theme="light"] .navbar-sidebar__items .menu__link.header-github-pill svg {
    filter: invert(0) opacity(0.95) !important;
  }
  html[data-theme="light"][data-nav-scrolled="1"] nav.navbar {
    background-color: var(--c-bg) !important;
    border-bottom: 1px solid var(--nav-border-scrolled) !important;
    box-shadow: 0 2px 12px rgba(4, 13, 18, 0.04) !important;
    opacity: 1 !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  html[data-theme="light"][data-nav-scrolled="1"] nav.navbar::before {
    opacity: 0 !important;
  }
  html[data-theme="light"][data-nav-scrolled="1"] nav.navbar .navbar__title {
    color: var(--c-text-strong) !important;
  }
  html[data-theme="light"][data-nav-scrolled="1"] nav.navbar .navbar__link:hover {
    color: var(--c-text-strong) !important;
  }
  html[data-theme="light"] .navbar-sidebar {
    background: var(--c-bg) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  html[data-theme="light"] .navbar-sidebar__brand {
    background: var(--c-bg) !important;
    border-bottom: 1px solid var(--nav-border-scrolled) !important;
    box-shadow: none !important;
  }
  html[data-theme="light"] .navbar-sidebar__brand .navbar__title {
    color: var(--c-text-strong) !important;
  }
  html[data-theme="light"] .navbar-sidebar__close {
    filter: invert(1) opacity(0.75) !important;
  }
  html[data-theme="light"] .navbar-sidebar__close:hover {
    background-color: rgba(0, 0, 0, 0.06) !important;
  }
  html[data-theme="light"]
    .navbar-sidebar
    .navbar-sidebar__search
    :is(
      [class*="navbarSearchContainer_"],
      .navbar__search,
      [class*="searchbarContainer_"],
      [class*="searchBarContainer_"]
    ) {
    background: #eef3f6 !important;
    border-radius: 8px;
  }
  html[data-theme="light"]
    .navbar-sidebar__search
    :is(
      .navbar__search,
      [class*="searchBarContainer_"],
      [class*="searchbarContainer_"],
      [class*="navbarSearchContainer_"]
    )::before,
  html[data-theme="light"] .navbar-sidebar__search [class*="searchBar_"]::before {
    filter: invert(1) opacity(0.65) !important;
  }
  html[data-theme="light"] .navbar-sidebar__search input {
    color: var(--c-text) !important;
  }
  html[data-theme="light"] .navbar-sidebar__search input::placeholder {
    color: color-mix(in oklab, var(--c-text) 55%, #fff);
  }
  html[data-theme="light"] .navbar-sidebar [class*="dropdownMenu_"],
  html[data-theme="light"] .navbar-sidebar__search [class*="searchBar_"] [class*="dropdownMenu_"] {
    background: #fff !important;
    border: 1px solid var(--lp-c-border) !important;
    box-shadow: var(--shadow-md, 0 10px 30px rgba(4, 13, 18, 0.08));
  }
  html[data-theme="light"] .navbar-sidebar .menu__caret,
  html[data-theme="light"] .navbar-sidebar .menu__caret:hover,
  html[data-theme="light"] .navbar-sidebar .menu__caret[aria-expanded="true"] {
    color: var(--c-text) !important;
    opacity: 1 !important;
    filter: none !important;
  }
  html[data-theme="light"] .navbar-sidebar .menu__caret::before,
  html[data-theme="light"] .navbar-sidebar .menu__caret::after {
    filter: none !important;
  }
  html[data-theme="light"] .navbar-sidebar .menu__caret {
    border-radius: 8px;
  }
  html[data-theme="light"] .navbar-sidebar .menu__caret:hover {
    background: transparent !important;
    color: var(--c-text-strong) !important;
  }
  html[data-theme="light"] .navbar-sidebar .menu__caret[aria-expanded="true"] {
    background: transparent !important;
    color: var(--c-text-strong) !important;
  }
  html[data-theme="light"] .navbar-sidebar .menu__caret:focus-visible {
    outline: 2px solid rgba(0, 0, 0, 0.1);
    outline-offset: 2px;
    border-radius: 8px;
  }
  html[data-theme="light"] .navbar-sidebar__items .menu__link,
  html[data-theme="light"] .theme-doc-sidebar-menu .menu__link {
    color: var(--c-text) !important;
    background: transparent !important;
  }
  html[data-theme="light"] .navbar-sidebar__items .menu__link.header-github-pill {
    color: var(--c-text) !important;
  }
  html[data-theme="light"] .navbar-sidebar__items .menu__link:hover:not(.menu__link--active),
  html[data-theme="light"] .theme-doc-sidebar-menu .menu__link:hover:not(.menu__link--active) {
    color: var(--c-text-strong) !important;
    background: rgba(0, 0, 0, 0.04) !important;
    transform: none !important;
  }
  html[data-theme="light"] .navbar-sidebar__items .menu__link.menu__link--sublist:hover,
  html[data-theme="light"] .theme-doc-sidebar-menu .menu__link.menu__link--sublist:hover {
    background: transparent !important;
  }
  html[data-theme="light"] .navbar-sidebar__items .menu__link--active,
  html[data-theme="light"] .theme-doc-sidebar-menu .menu__link--active {
    color: var(--c-text-strong) !important;
    background: rgba(0, 0, 0, 0.08) !important;
    font-weight: var(--fw-sidebar-active) !important;
    transform: none !important;
  }
  html[data-theme="light"] .navbar-sidebar__items .menu__link.menu__link--sublist[aria-expanded="true"],
  html[data-theme="light"] .theme-doc-sidebar-menu .menu__link.menu__link--sublist[aria-expanded="true"] {
    color: var(--c-text-strong) !important;
    background: transparent !important;
    font-weight: var(--fw-sidebar-active) !important;
    transform: none !important;
  }
  html[data-theme="light"] .navbar-sidebar__items .menu__link.menu__link--sublist.active,
  html[data-theme="light"] .theme-doc-sidebar-menu .menu__link.menu__link--sublist.active,
  html[data-theme="light"] .navbar-sidebar__items .menu__link.menu__link--sublist[aria-current="page"],
  html[data-theme="light"] .theme-doc-sidebar-menu .menu__link.menu__link--sublist[aria-current="page"] {
    color: var(--c-text-strong) !important;
    background: transparent !important;
    font-weight: var(--fw-sidebar-active) !important;
    transform: none !important;
  }
  html[data-theme="light"] .navbar-sidebar__items .menu__link.menu__link--sublist.menu__link--active,
  html[data-theme="light"] .theme-doc-sidebar-menu .menu__link.menu__link--sublist.menu__link--active {
    background: transparent !important;
  }
  html[data-theme="light"] .navbar-sidebar .menu__list-item-collapsible {
    border-radius: 12px;
  }
  html[data-theme="light"] .navbar-sidebar .menu__list-item-collapsible:hover {
    background: rgba(0, 0, 0, 0.04) !important;
  }
  html[data-theme="light"]
    .navbar-sidebar
    .menu__list-item-collapsible:has(.menu__link.menu__link--sublist.menu__link--active),
  html[data-theme="light"]
    .navbar-sidebar
    .menu__list-item-collapsible:has(.menu__link.menu__link--sublist[aria-expanded="true"]),
  html[data-theme="light"] .navbar-sidebar .menu__list-item-collapsible:has(.menu__link.menu__link--sublist.active),
  html[data-theme="light"]
    .navbar-sidebar
    .menu__list-item-collapsible:has(.menu__link.menu__link--sublist[aria-current="page"]) {
    background: rgba(0, 0, 0, 0.08) !important;
  }
}
/* Dark theme mobile navbar and sidebar overrides */
@media (max-width: 996px) {
  html[data-theme="dark"] .navbar-sidebar {
    background: var(--c-bg, #0f1419) !important;
    background-image: none !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  html[data-theme="dark"] .navbar-sidebar__brand,
  html[data-theme="dark"] .navbar-sidebar__items,
  html[data-theme="dark"] .navbar-sidebar__items--show-secondary,
  html[data-theme="dark"] .navbar-sidebar__items > .navbar-sidebar__item.menu,
  html[data-theme="dark"] .navbar-sidebar__items .theme-layout-navbar-sidebar-panel.navbar-sidebar__item.menu,
  html[data-theme="dark"] .navbar-sidebar__item.menu {
    background: var(--c-bg, #0f1419) !important;
  }
  html[data-theme="dark"] .navbar-sidebar__items .menu__link,
  html[data-theme="dark"] .theme-doc-sidebar-menu .menu__link {
    color: #e9eef1 !important;
  }
  html[data-theme="dark"] .navbar-sidebar .menu__caret::before,
  html[data-theme="dark"] .navbar-sidebar .menu__caret::after {
    filter: brightness(0) invert(1) !important;
  }
  html[data-theme="dark"] .navbar-sidebar__items .menu__link:hover {
    color: #fff !important;
    background: rgba(255, 255, 255, 0.06) !important;
  }
  html[data-theme="dark"] .navbar-sidebar__items .menu__link.menu__link--sublist:hover,
  html[data-theme="dark"] .theme-doc-sidebar-menu .menu__link.menu__link--sublist:hover {
    background: transparent !important;
  }
  html[data-theme="dark"] .navbar-sidebar__items .menu__link--active:not(.menu__link--sublist) {
    color: #fff !important;
    background: rgba(255, 255, 255, 0.1) !important;
  }
  html[data-theme="dark"] .navbar-sidebar__items .menu__link--active,
  html[data-theme="dark"] .theme-doc-sidebar-menu .menu__link--active {
    color: #fff !important;
    background: rgba(255, 255, 255, 0.1) !important;
    font-weight: var(--fw-sidebar-active) !important;
    transform: none !important;
  }
  html[data-theme="dark"] .navbar-sidebar__items .menu__link.menu__link--sublist[aria-expanded="true"],
  html[data-theme="dark"] .theme-doc-sidebar-menu .menu__link.menu__link--sublist[aria-expanded="true"] {
    color: #fff !important;
    background: rgba(255, 255, 255, 0.1) !important;
    font-weight: var(--fw-sidebar-active) !important;
    transform: none !important;
  }
  html[data-theme="dark"] .navbar-sidebar__items .menu__link.menu__link--sublist.active,
  html[data-theme="dark"] .theme-doc-sidebar-menu .menu__link.menu__link--sublist.active,
  html[data-theme="dark"] .navbar-sidebar__items .menu__link.menu__link--sublist[aria-current="page"],
  html[data-theme="dark"] .theme-doc-sidebar-menu .menu__link.menu__link--sublist[aria-current="page"] {
    color: #fff !important;
    background: transparent !important;
    font-weight: var(--fw-sidebar-active) !important;
    transform: none !important;
  }
  html[data-theme="dark"] .navbar-sidebar__items .menu__link.menu__link--sublist.menu__link--active,
  html[data-theme="dark"] .theme-doc-sidebar-menu .menu__link.menu__link--sublist.menu__link--active {
    background: transparent !important;
  }
  html[data-theme="dark"] .navbar-sidebar .menu__list-item-collapsible {
    border-radius: 12px;
  }
  html[data-theme="dark"] .navbar-sidebar .menu__list-item-collapsible:hover {
    background: rgba(255, 255, 255, 0.06) !important;
  }
  html[data-theme="dark"]
    .navbar-sidebar
    .menu__list-item-collapsible:has(.menu__link.menu__link--sublist.menu__link--active),
  html[data-theme="dark"]
    .navbar-sidebar
    .menu__list-item-collapsible:has(.menu__link.menu__link--sublist[aria-expanded="true"]),
  html[data-theme="dark"] .navbar-sidebar .menu__list-item-collapsible:has(.menu__link.menu__link--sublist.active),
  html[data-theme="dark"]
    .navbar-sidebar
    .menu__list-item-collapsible:has(.menu__link.menu__link--sublist[aria-current="page"]) {
    background: rgba(255, 255, 255, 0.1) !important;
  }
  html[data-theme="dark"] .navbar-sidebar__brand {
    border-bottom: 1px solid var(--nav-border-scrolled) !important;
    box-shadow: none !important;
  }
  html[data-theme="dark"] .navbar-sidebar .menu__caret[aria-expanded="true"] {
    color: inherit !important;
  }
}

/* Sidebar open state (overlay and scroll lock) */
@media (max-width: 996px) {
  nav.navbar.navbar-sidebar--show .navbar__toggle {
    filter: invert(0) opacity(0.95);
  }
  nav.navbar.navbar-sidebar--show .navbar__title {
    color: #fff !important;
  }
  html:has(nav.navbar.navbar-sidebar--show),
  body:has(nav.navbar.navbar-sidebar--show) {
    overflow: hidden !important;
    height: 100dvh !important;
    touch-action: none !important;
    overscroll-behavior: none !important;
  }
  body:has(nav.navbar.navbar-sidebar--show) .main-wrapper {
    pointer-events: none !important;
  }
}
